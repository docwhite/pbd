<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: ParticleSystem</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: ParticleSystem</h1>

    




<section>

<header>
    
        <h2>ParticleSystem</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    <h4 class="name" id="ParticleSystem"><span class="type-signature"></span>new ParticleSystem<span class="signature">(canvasId)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Creates an instance for a particle system and initializes all the WebGL
related commands so we can start drawing. It also sets event handlers.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>canvasId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The canvas id associated with the particle system.</td>
        </tr>

    
    </tbody>
</table>






    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>NUM_ITERATIONS</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The number of times to run the method to
satisfy the constraints.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>TIMESTEP</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Used for the velvet integration. The smaller the
more precise.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>curPositions</code></td>
            

            <td class="type">
            
                
<span class="param-type">list</span>


            
            </td>

            

            

            <td class="description last">Current positions of the particles in system.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>oldPositions</code></td>
            

            <td class="type">
            
                
<span class="param-type">list</span>


            
            </td>

            

            

            <td class="description last">Positions of the particles in the previous step.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>posData</code></td>
            

            <td class="type">
            
                
<span class="param-type">list</span>


            
            </td>

            

            

            <td class="description last">Particle positoins ready to be sent to WebGL.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>constraints</code></td>
            

            <td class="type">
            
                
<span class="param-type">list</span>


            
            </td>

            

            

            <td class="description last">List containing all the constraints. It might be
of type <a href="PinConstraint.html">PinConstraint</a> or <a href="SpringConstraint.html">SpringConstraint</a>.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>conData</code></td>
            

            <td class="type">
            
                
<span class="param-type">conData</span>


            
            </td>

            

            

            <td class="description last">The constraints will be drawn too, so this stores
an array of indices of the posData that will be drawn using an EBO so we
don't send duplicate data to WebGL. For example [2,3,4,8] means there are two
constraints that need to be drawin, one drawing a line between particle with
index 2 and 3 and the other one between 4 and 8.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>gravity</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Has an x and y property to represent gravity. For
this example this is what will populate the force accumulators list. So each
element in the force accumulators list will have the same value as gravity.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>forceAccumulators</code></td>
            

            <td class="type">
            
                
<span class="param-type">list</span>


            
            </td>

            

            

            <td class="description last">List of forces represented as an object
with x and y properties that will be used by the verlet integration, before
the constraint projection, to advect the particles. Think of a force
accumulator as an external (not internal) force that acts on the particles.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>num_springs</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Stores how many constraints are of type
<a href="SpringConstraint.html">SpringConstraint</a>, it's needed for drawing the right amount of lines.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>clickCon</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Click events create constraints dynamically. Once
a mouse down event is registered we look around the clicked point by a given
radius and if some particles exists within the range we append them to the
<code>constrained</code> property of this object as well as the
<code>x</code> and <code>y</code> coordinates of the mouse. If the mouse is
released the constraints will be removed from the system. And if the
<code>breakable</code> flag is true the spring constraints will be deleted if
they exceed 200px distance.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>w</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Width of the canvas (on resize glViewport is called).</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>h</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Height of the canvas (on resize glViewport is called).</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="verlet.js.html">verlet.js</a>, <a href="verlet.js.html#line142">line 142</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="accumulateForces"><span class="type-signature"></span>accumulateForces<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Accumulates forces for each particle
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="verlet.js.html">verlet.js</a>, <a href="verlet.js.html#line317">line 317</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="addParticle"><span class="type-signature"></span>addParticle<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Places a new particle at a given position.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="verlet.js.html">verlet.js</a>, <a href="verlet.js.html#line252">line 252</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="draw"><span class="type-signature"></span>draw<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Draws all the particles in the scene.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="verlet.js.html">verlet.js</a>, <a href="verlet.js.html#line298">line 298</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="initializeGL"><span class="type-signature"></span>initializeGL<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Initializes all the WebGL-reladeltated operations
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="verlet.js.html">verlet.js</a>, <a href="verlet.js.html#line262">line 262</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="satisfyConstraints"><span class="type-signature"></span>satisfyConstraints<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    All the constraints will be satisfied by modifying the current positions.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="verlet.js.html">verlet.js</a>, <a href="verlet.js.html#line347">line 347</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="sendDataToGL"><span class="type-signature"></span>sendDataToGL<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Packs all data into single flat array and sends it to client WebGL.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="verlet.js.html">verlet.js</a>, <a href="verlet.js.html#line372">line 372</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="step"><span class="type-signature"></span>step<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This is basically the game loop. It accumulates the forces, then performs the
Velvet integration, then project all the positions so they satisfy the
constraints, then sends the data to the WebGL buffers so it's ready to be
drawn.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="verlet.js.html">verlet.js</a>, <a href="verlet.js.html#line405">line 405</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="verlet"><span class="type-signature"></span>verlet<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Perform the Verlet integration step
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="verlet.js.html">verlet.js</a>, <a href="verlet.js.html#line327">line 327</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ParticleSystem.html">ParticleSystem</a></li><li><a href="PinConstraint.html">PinConstraint</a></li><li><a href="SpringConstraint.html">SpringConstraint</a></li></ul><h3>Global</h3><ul><li><a href="global.html#createShader">createShader</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Thu Mar 09 2017 12:47:22 GMT+0000 (GMT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>